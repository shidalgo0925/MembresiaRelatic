{% extends "base.html" %}

{% block title %}Dashboard - RelaticPanama{% endblock %}

{% block page_content %}
{% block content %}
<div class="canvas-dashboard">
    <!-- Título Principal con Gradiente -->
    <div class="dashboard-header text-center mb-4">
        <h1 class="dashboard-title">
            <span class="title-word title-word-1">¿Qué</span>
            <span class="title-word title-word-2">aprendemos</span>
            <span class="title-word title-word-3">hoy?</span>
        </h1>
    </div>

    <!-- Botones de Acción (Pills) -->
    <div class="action-buttons d-flex justify-content-center gap-2 mb-4">
        <button class="btn btn-pill btn-pill-active">
            <i class="fas fa-briefcase me-2"></i>
            Mis diseños
        </button>
        <button class="btn btn-pill">
            <i class="fas fa-layer-group me-2"></i>
            Plantillas
        </button>
        <button class="btn btn-pill">
            <i class="fas fa-robot me-2"></i>
            Relatic IA
        </button>
    </div>

    <!-- Barra de Búsqueda -->
    <div class="search-container mb-5">
        <div class="search-bar">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Busca en tus diseños, carpetas y archivos subidos">
            <i class="fas fa-filter search-filter"></i>
        </div>
    </div>

    <!-- Iconos Circulares de Servicios -->
    <div class="services-icons-container mb-5">
        <div class="services-icons-row d-flex gap-3 justify-content-center flex-wrap">
            <div class="service-icon-item" data-service="revistas">
                <div class="service-icon-circle bg-purple">
                    <i class="fas fa-newspaper"></i>
                </div>
                <span class="service-icon-label">Revistas</span>
            </div>
            <div class="service-icon-item" data-service="presentaciones">
                <div class="service-icon-circle bg-orange">
                    <i class="fas fa-presentation"></i>
                </div>
                <span class="service-icon-label">Presentación</span>
            </div>
            <div class="service-icon-item" data-service="redes">
                <div class="service-icon-circle bg-red">
                    <i class="fas fa-share-alt"></i>
                </div>
                <span class="service-icon-label">Redes</span>
            </div>
            <div class="service-icon-item" data-service="video">
                <div class="service-icon-circle bg-pink">
                    <i class="fas fa-video"></i>
                </div>
                <span class="service-icon-label">Vídeo</span>
            </div>
            <div class="service-icon-item" data-service="impresion">
                <div class="service-icon-circle bg-purple">
                    <i class="fas fa-print"></i>
                </div>
                <span class="service-icon-label">Impresión</span>
            </div>
            <div class="service-icon-item" data-service="documentos">
                <div class="service-icon-circle bg-teal">
                    <i class="fas fa-file-alt"></i>
                </div>
                <span class="service-icon-label">Doc</span>
            </div>
            <div class="service-icon-item" data-service="pizarra">
                <div class="service-icon-circle bg-green">
                    <i class="fas fa-chalkboard"></i>
                </div>
                <span class="service-icon-label">Pizarra</span>
            </div>
            <div class="service-icon-item" data-service="hoja-calculo">
                <div class="service-icon-circle bg-blue">
                    <i class="fas fa-table"></i>
                </div>
                <span class="service-icon-label">Hoja de cálculo</span>
            </div>
            <div class="service-icon-item" data-service="web">
                <div class="service-icon-circle bg-dark-blue">
                    <i class="fas fa-globe"></i>
                </div>
                <span class="service-icon-label">Web</span>
            </div>
            <div class="service-icon-item" data-service="foto">
                <div class="service-icon-circle bg-brown">
                    <i class="fas fa-images"></i>
                </div>
                <span class="service-icon-label">Foto</span>
            </div>
            <div class="service-icon-item" data-service="personalizado">
                <div class="service-icon-circle bg-white">
                    <i class="fas fa-user"></i>
                </div>
                <span class="service-icon-label">Personalizado</span>
            </div>
        </div>
    </div>

    <!-- Sección Recientes -->
    <div class="recent-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="recent-title">Recientes</h2>
            <button class="btn btn-link text-decoration-none">Ver todo</button>
        </div>
        <div class="recent-cards-container">
            <div class="recent-cards-scroll d-flex gap-3">
                <!-- Tarjeta 1 -->
                <div class="recent-card">
                    <div class="recent-card-header">
                        <i class="fas fa-lock text-muted"></i>
                        <span class="recent-card-privacy">Privado</span>
                    </div>
                    <div class="recent-card-preview bg-light">
                        <i class="fas fa-file-alt text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <div class="recent-card-title">Documento 1</div>
                </div>
                <!-- Tarjeta 2 -->
                <div class="recent-card">
                    <div class="recent-card-header">
                        <i class="fas fa-lock text-muted"></i>
                        <span class="recent-card-privacy">Privado</span>
                    </div>
                    <div class="recent-card-preview bg-light">
                        <i class="fas fa-presentation text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <div class="recent-card-title">Presentación 1</div>
                </div>
                <!-- Tarjeta 3 -->
                <div class="recent-card">
                    <div class="recent-card-header">
                        <i class="fas fa-lock text-muted"></i>
                        <span class="recent-card-privacy">Privado</span>
                    </div>
                    <div class="recent-card-preview bg-light">
                        <i class="fas fa-image text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <div class="recent-card-title">Imagen 1</div>
                </div>
                <!-- Tarjeta 4 -->
                <div class="recent-card">
                    <div class="recent-card-header">
                        <i class="fas fa-lock text-muted"></i>
                        <span class="recent-card-privacy">Privado</span>
                    </div>
                    <div class="recent-card-preview bg-light">
                        <i class="fas fa-video text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <div class="recent-card-title">Vídeo 1</div>
                </div>
                <!-- Tarjeta 5 -->
                <div class="recent-card">
                    <div class="recent-card-header">
                        <i class="fas fa-lock text-muted"></i>
                        <span class="recent-card-privacy">Privado</span>
                    </div>
                    <div class="recent-card-preview bg-light">
                        <i class="fas fa-file-pdf text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <div class="recent-card-title">PDF 1</div>
                </div>
            </div>
        </div>
    </div>

    {% if current_user.is_admin %}
    <div class="admin-section mt-5">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="service-icon-circle bg-dark-blue me-3" style="width: 55px; height: 55px; font-size: 22px;">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div>
                        <h3 class="h5 mb-0">Panel de Administración</h3>
                        <small class="text-muted">Accesos rápidos disponibles solo para administradores</small>
                    </div>
                </div>
                <div class="row g-3">
                    <div class="col-md-3 col-sm-6">
                        <a href="{{ url_for('admin_dashboard') }}" class="card h-100 border-0 shadow-sm text-decoration-none text-dark admin-card-link">
                            <div class="card-body">
                                <i class="fas fa-tachometer-alt text-primary fa-2x mb-3"></i>
                                <h6 class="fw-bold mb-1">Panel General</h6>
                                <p class="text-muted small mb-0">Métricas y visión general</p>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <a href="{{ url_for('admin_users') }}" class="card h-100 border-0 shadow-sm text-decoration-none text-dark admin-card-link">
                            <div class="card-body">
                                <i class="fas fa-users text-success fa-2x mb-3"></i>
                                <h6 class="fw-bold mb-1">Usuarios</h6>
                                <p class="text-muted small mb-0">Gestión de cuentas</p>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <a href="{{ url_for('admin_memberships') }}" class="card h-100 border-0 shadow-sm text-decoration-none text-dark admin-card-link">
                            <div class="card-body">
                                <i class="fas fa-crown text-warning fa-2x mb-3"></i>
                                <h6 class="fw-bold mb-1">Membresías</h6>
                                <p class="text-muted small mb-0">Planes y estados</p>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <a href="{{ url_for('admin_events.admin_events_index') }}" class="card h-100 border-0 shadow-sm text-decoration-none text-dark admin-card-link">
                            <div class="card-body">
                                <i class="fas fa-calendar-alt text-danger fa-2x mb-3"></i>
                                <h6 class="fw-bold mb-1">Eventos</h6>
                                <p class="text-muted small mb-0">Eventos y citas RELATIC</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
// Agregar clase 'stuck' cuando el resumen de membresía esté fijo
document.addEventListener('DOMContentLoaded', function() {
    const membershipSummary = document.querySelector('.sticky-membership-summary');
    if (membershipSummary) {
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    if (entry.intersectionRatio < 1) {
                        membershipSummary.classList.add('stuck');
                    } else {
                        membershipSummary.classList.remove('stuck');
                    }
                });
            },
            { threshold: [1] }
        );
        observer.observe(membershipSummary);
    }
});
</script>
{% endblock %}
{% endblock %}

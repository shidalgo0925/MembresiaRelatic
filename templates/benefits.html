{% extends "base.html" %}

{% block title %}Beneficios - RelaticPanama{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-12">
            <h1 class="display-6 mb-4">
                <i class="fas fa-star"></i> Beneficios de tu Membresía
            </h1>
            <p class="lead text-muted">Accede a recursos exclusivos diseñados para investigadores y académicos</p>
        </div>
    </div>

    <!-- Filtros por tipo de membresía -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h5><i class="fas fa-filter"></i> Filtrar por Tipo de Membresía</h5>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary active" onclick="filterBenefits('all')">Todos</button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterBenefits('basic')">Básica</button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterBenefits('premium')">Premium</button>
                        <button type="button" class="btn btn-outline-warning" onclick="filterBenefits('enterprise')">Enterprise</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Beneficios -->
    <div class="row g-4" id="benefits-container">
        {% for benefit in benefits %}
        <div class="col-md-6 col-lg-4 benefit-item" data-type="{{ benefit.membership_type }}">
            <div class="card benefit-card h-100 border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="benefit-icon me-3">
                            {% if 'revista' in benefit.name.lower() or 'biblioteca' in benefit.name.lower() %}
                                <i class="fas fa-book fa-2x" style="color: var(--primary-blue);"></i>
                            {% elif 'base' in benefit.name.lower() or 'datos' in benefit.name.lower() %}
                                <i class="fas fa-database fa-2x" style="color: var(--secondary-blue);"></i>
                            {% elif 'asesoría' in benefit.name.lower() or 'consultoría' in benefit.name.lower() %}
                                <i class="fas fa-user-graduate fa-2x" style="color: var(--accent-orange);"></i>
                            {% elif 'soporte' in benefit.name.lower() %}
                                <i class="fas fa-headset fa-2x" style="color: var(--primary-blue);"></i>
                            {% elif 'webinar' in benefit.name.lower() %}
                                <i class="fas fa-video fa-2x" style="color: var(--accent-orange);"></i>
                            {% elif 'red' in benefit.name.lower() or 'contacto' in benefit.name.lower() %}
                                <i class="fas fa-users fa-2x" style="color: var(--success-green);"></i>
                            {% elif 'descuento' in benefit.name.lower() %}
                                <i class="fas fa-percentage fa-2x" style="color: var(--success-green);"></i>
                            {% else %}
                                <i class="fas fa-gift fa-2x" style="color: var(--primary-blue);"></i>
                            {% endif %}
                        </div>
                        <div>
                            <h6 class="card-title mb-0">{{ benefit.name }}</h6>
                            <span class="badge bg-{{ 'primary' if benefit.membership_type == 'basic' else 'success' }}">
                                {{ benefit.membership_type.title() }}
                            </span>
                        </div>
                    </div>
                    <p class="card-text text-muted">{{ benefit.description }}</p>
                    <div class="mt-3">
                        <button class="btn btn-outline-primary btn-sm" onclick="showBenefitDetails('{{ benefit.name }}', '{{ benefit.description }}')">
                            <i class="fas fa-info-circle"></i> Más Información
                        </button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Additional Benefits Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-plus-circle"></i> Beneficios Adicionales</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center">
                                <i class="fas fa-book fa-3x text-primary mb-3"></i>
                                <h6>Biblioteca Digital</h6>
                                <p class="text-muted">Acceso a miles de revistas y publicaciones académicas</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <i class="fas fa-database fa-3x text-success mb-3"></i>
                                <h6>Bases de Datos</h6>
                                <p class="text-muted">Explora bases de datos especializadas en investigación</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <i class="fas fa-user-graduate fa-3x text-warning mb-3"></i>
                                <h6>Asesoría Profesional</h6>
                                <p class="text-muted">Recibe asesoría especializada para tus proyectos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Section -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card bg-light">
                <div class="card-body text-center">
                    <h5>¿Necesitas ayuda con tus beneficios?</h5>
                    <p class="text-muted">Nuestro equipo de soporte está aquí para ayudarte</p>
                    <a href="mailto:soporte@relaticpanama.org" class="btn btn-primary">
                        <i class="fas fa-envelope"></i> Contactar Soporte
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para detalles de beneficios -->
    <div class="modal fade" id="benefitModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="benefitModalTitle">Detalles del Beneficio</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="benefitModalBody">
                    <!-- Contenido dinámico -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="requestBenefit()">Solicitar Acceso</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function filterBenefits(type) {
    const items = document.querySelectorAll('.benefit-item');
    const buttons = document.querySelectorAll('.btn-group .btn');
    
    // Actualizar botones activos
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Filtrar elementos
    items.forEach(item => {
        if (type === 'all' || item.dataset.type === type) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

function showBenefitDetails(name, description) {
    document.getElementById('benefitModalTitle').textContent = name;
    document.getElementById('benefitModalBody').innerHTML = `
        <div class="mb-3">
            <h6>Descripción:</h6>
            <p>${description}</p>
        </div>
        <div class="mb-3">
            <h6>¿Cómo acceder?</h6>
            <p>Una vez que tengas una membresía activa, podrás acceder a este beneficio desde tu dashboard personalizado.</p>
        </div>
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i>
            <strong>Nota:</strong> Algunos beneficios pueden requerir configuración adicional. Nuestro equipo de soporte te ayudará con el proceso.
        </div>
    `;
    
    const modal = new bootstrap.Modal(document.getElementById('benefitModal'));
    modal.show();
}

function requestBenefit() {
    alert('Funcionalidad de solicitud de beneficios pendiente de implementar. Por ahora, contacta a soporte@relaticpanama.org');
}
</script>
{% endblock %}
